<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Free Key - SpeedXhub | Halloween</title>
  <style>
    :root{
      --bg:#090b14; --fg:#f6f7ff; --accent:#ff6a00; --purple:#8a2be2; --glass:rgba(255,255,255,.08); --edge:rgba(255,255,255,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{background:radial-gradient(1200px 600px at 70% 10%, #0f1733 0%, #090b14 55%, #06070d 100%);color:var(--fg);font-family:system-ui,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;overflow:hidden}

    /* LAYERS */
    .layer{position:fixed;inset:0;pointer-events:none}
    .stars{z-index:0;background-image:radial-gradient(2px 2px at 20% 30%, #a7b8ff 40%, transparent 41%),radial-gradient(1.5px 1.5px at 70% 20%, #fff 40%, transparent 41%),radial-gradient(1px 1px at 40% 70%, #a7c4ff 40%, transparent 41%),radial-gradient(1px 1px at 90% 50%, #fff 40%, transparent 41%),radial-gradient(1.2px 1.2px at 10% 80%, #dbe6ff 40%, transparent 41%),radial-gradient(1.3px 1.3px at 55% 60%, #fff 40%, transparent 41%);animation:twinkle 6s linear infinite}
    @keyframes twinkle{50%{filter:brightness(1.3)}}
    .rain{z-index:2;overflow:hidden}
    .lightning{z-index:3;background:linear-gradient(180deg,rgba(255,255,255,0.0),rgba(255,255,255,0.18) 45%,rgba(255,255,255,0));mix-blend-mode:screen;opacity:0;transition:opacity .2s ease}
    .lightning.flash{opacity:1}

    /* RAIN */
    .raindrop{position:absolute;width:2px;height:22vh;background:linear-gradient(to bottom,rgba(255,255,255,.0),rgba(180,220,255,.9));top:-24vh;animation:fall linear infinite}
    @keyframes fall{to{transform:translateY(140vh) translateX(var(--drift,0px))}}

    /* HORIZON */
    .horizon{position:fixed;left:0;right:0;bottom:-2vh;height:36vh;pointer-events:none;z-index:1}
    .horizon svg{width:140%;height:100%;transform:translateX(-10%)}

    /* WITCH & GHOST */
    .witch{position:fixed;top:16vh;left:-22vw;width:min(24vw,300px);aspect-ratio:2/1;background:conic-gradient(from 90deg at 60% 50%,transparent 0 88%,rgba(0,0,0,.75) 88% 100%);clip-path:polygon(0% 55%,45% 45%,75% 55%,100% 50%,75% 65%,45% 55%);filter:drop-shadow(0 0 18px rgba(138,43,226,.55));transform:scaleX(-1) rotate(-4deg);animation:fly 16s linear infinite;z-index:2}
    .witch::after{content:"";position:absolute;inset:30% 70% 40% 5%;background:radial-gradient(circle at 20% 50%,#000 0 42%,transparent 43%);border-radius:50%}
    @keyframes fly{to{transform:translateX(150vw) translateY(0) scaleX(-1) rotate(6deg)}}
    .ghost{position:fixed;right:-12vw;bottom:22vh;width:min(18vw,240px);aspect-ratio:3/4;background:radial-gradient(60% 50% at 50% 30%,#ffffffcc 0%,#ffffff55 60%,transparent 61%),radial-gradient(70% 60% at 50% 80%,#ffffff90 0%,#ffffff30 60%,transparent 61%);border-radius:60% 60% 40% 40%/50% 50% 45% 45%;animation:drift 12s ease-in-out infinite alternate;z-index:1}
    @keyframes drift{to{transform:translateX(-120vw) translateY(-6vh)}}

    /* PUMPKINS */
    .pumpkins{position:fixed;bottom:6vh;left:0;right:0;display:flex;justify-content:space-around;gap:2vw;pointer-events:none;z-index:1}
    .pumpkin{position:relative;width:min(12vw,120px);aspect-ratio:1/.8;background:radial-gradient(120% 90% at 50% 60%,#ff9d2e 0%,#ef5a00 55%,#7a2c00 100%);border-radius:50%/58%;box-shadow:0 0 14px rgba(255,106,0,.8),0 0 36px rgba(255,106,0,.35);animation:f 4.8s ease-in-out infinite}
    @keyframes f{50%{transform:translateY(-6px)}}
    .stem{position:absolute;top:-8%;left:47%;width:8%;height:14%;background:linear-gradient(#3a8f23,#1d4b12);border-radius:20% 20% 60% 60%/30% 30% 70% 70%;transform:rotate(-12deg)}
    .face{position:absolute;inset:0;display:grid;place-items:center;filter:drop-shadow(0 0 8px #ffa600)}
    .glow{fill:#ffdb7a}

    /* UI */
    .topbar{position:fixed;left:0;right:0;top:0;height:54px;display:flex;align-items:center;gap:10px;padding:0 10px;z-index:7}
    .hamburger{appearance:none;border:none;background:rgba(255,255,255,.1);border:1px solid var(--edge);color:var(--fg);width:46px;height:42px;border-radius:12px;display:grid;place-items:center;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,.35)}
    .hamburger span{display:block;width:22px;height:2px;background:currentColor;box-shadow:0 6px 0 0 currentColor, 0 -6px 0 0 currentColor}

    .center{position:fixed;inset:0;display:grid;place-items:center;padding:4vmin;z-index:5}
    .card{position:relative;width:min(92vw,720px);max-width:720px;backdrop-filter:blur(12px) saturate(120%);background:linear-gradient(180deg,rgba(255,255,255,.10),rgba(255,255,255,.06));border:1px solid var(--edge);border-radius:28px;padding:24px clamp(18px,4vmin,36px);box-shadow:0 20px 60px rgba(0,0,0,.5)}
    .title{font-size:clamp(22px,3.6vmin,34px);margin:0 0 12px;text-shadow:0 0 12px rgba(255,106,0,.85),0 0 36px rgba(255,106,0,.35)}
    .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .btn{appearance:none;border:none;border-radius:14px;padding:12px 16px;font-weight:800;letter-spacing:.3px;cursor:pointer;color:#1a0c00;background:linear-gradient(180deg,#ffb15a,#ff6a00);box-shadow:0 0 12px rgba(255,106,0,.85),0 0 36px rgba(255,106,0,.35)}
    .btn:active{transform:translateY(1px) scale(.99)}
    .btn[disabled]{filter:grayscale(.6) brightness(.8);cursor:not-allowed;box-shadow:none}
    .copy{background:linear-gradient(180deg,#cdb7ff,#8a2be2);color:#0b0214;box-shadow:0 0 14px rgba(138,43,226,.6)}

    .key-box{display:flex;align-items:center;gap:10px;margin-top:12px;width:100%}
    .key-canvas{display:block;flex:1 1 auto;min-width:0;height:54px;border-radius:14px;border:1px dashed rgba(255,255,255,.3);background:repeating-linear-gradient(90deg,rgba(255,255,255,.05) 0 12px,rgba(255,255,255,.03) 12px 24px),linear-gradient(180deg,rgba(0,0,0,.25),rgba(255,255,255,.04));box-shadow:inset 0 0 24px rgba(0,0,0,.55)}
    .copykey{flex:0 0 auto}

    /* Sidebar (OFFCANVAS) */
    .sidebar{position:fixed;left:0;top:0;bottom:0;width:min(80vw,320px);backdrop-filter:blur(10px);background:linear-gradient(180deg,rgba(255,255,255,.10),rgba(255,255,255,.04));border-right:1px solid var(--edge);padding:18px 16px;z-index:6;display:flex;flex-direction:column;gap:12px;transform:translateX(-100%);transition:transform .25s ease}
    .sidebar.open{transform:translateX(0)}
    .sb-title{font-weight:900;letter-spacing:.6px;font-size:18px;margin:0 0 8px}
    .field{display:flex;flex-direction:column;gap:6px}
    .input{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.18);color:var(--fg);padding:10px 12px;border-radius:12px;outline:none}
    .login{margin-top:6px}

    /* RESPONSIVE */
    @media (max-width: 768px){
      .card{width:94vw;padding:18px}
      .key-canvas{height:50px}
    }
    @media (orientation:landscape) and (max-height: 500px){
      .center{align-items:flex-start;padding-top:64px}
      .card{width:82vw}
    }
    @media (min-width: 1024px){
      .card{width:min(70vw,720px)}
    }
  </style>
</head>
<body>
  <!-- TOP BAR / HAMBURGER -->
  <div class="topbar">
    <button id="menuBtn" class="hamburger" aria-label="Abrir menú">
      <span></span>
    </button>
  </div>

  <!-- BACKGROUND -->
  <div class="layer stars"></div>
  <div class="layer lightning" id="lightning"></div>
  <div class="layer rain" id="rain"></div>

  <!-- HOUSES -->
  <div class="horizon">
    <svg viewBox="0 0 1200 300" preserveAspectRatio="none">
      <defs>
        <linearGradient id="houseShade" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#0b0e19"/>
          <stop offset="100%" stop-color="#05070e"/>
        </linearGradient>
        <radialGradient id="windowGlow" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#ffde8a"/>
          <stop offset="100%" stop-color="#ff9c1a"/>
        </radialGradient>
      </defs>
      <g fill="url(#houseShade)">
        <path d="M0 260 L80 260 L80 210 L120 210 L120 260 L220 260 L220 170 L260 170 L260 260 L320 260 L320 190 L370 150 L420 190 L420 260 L520 260 L520 145 L560 145 L560 260 L640 260 L700 210 L760 260 L920 260 L920 190 L980 150 L1040 190 L1040 260 L1200 260 L1200 300 L0 300 Z"/>
        <rect x="110" y="222" width="10" height="16" fill="url(#windowGlow)" opacity=".8"/>
        <rect x="340" y="205" width="12" height="18" fill="url(#windowGlow)" opacity=".8"/>
        <rect x="610" y="210" width="10" height="16" fill="url(#windowGlow)" opacity=".8"/>
        <rect x="860" y="214" width="12" height="18" fill="url(#windowGlow)" opacity=".8"/>
      </g>
    </svg>
  </div>

  <!-- WITCH / GHOST / PUMPKINS -->
  <div class="witch"></div>
  <div class="ghost"></div>
  <div class="pumpkins" aria-hidden="true">
    <div class="pumpkin"><div class="stem"></div><svg class="face" viewBox="0 0 100 80"><polygon class="glow" points="20,30 35,20 35,40"/><polygon class="glow" points="80,30 65,20 65,40"/><path class="glow" d="M20,60 Q50,30 80,60 L20,60 Z"/></svg></div>
    <div class="pumpkin" style="animation-delay:1s"><div class="stem"></div><svg class="face" viewBox="0 0 100 80"><circle class="glow" cx="30" cy="30" r="8"/><circle class="glow" cx="70" cy="30" r="8"/><path class="glow" d="M20,55 Q50,70 80,55 L20,55 Z"/></svg></div>
    <div class="pumpkin" style="animation-delay:2s"><div class="stem"></div><svg class="face" viewBox="0 0 100 80"><polygon class="glow" points="25,28 35,18 35,38"/><polygon class="glow" points="75,28 65,18 65,38"/><rect class="glow" x="35" y="52" width="30" height="8" rx="2"/></svg></div>
  </div>

  <!-- SIDEBAR (OFF by default) -->
  <aside id="sidebar" class="sidebar" aria-hidden="true">
    <h2 class="sb-title">ONLY PREMIUM</h2>
    <label class="field">
      <span>Usuario</span>
      <input class="input" type="text" placeholder="username" autocomplete="username">
    </label>
    <label class="field">
      <span>Contraseña</span>
      <input class="input" type="password" placeholder="••••••••" autocomplete="current-password">
    </label>
    <button class="btn login">Login</button>
  </aside>

  <!-- CENTER PANEL -->
  <main class="center">
    <section class="card" role="dialog" aria-labelledby="t">
      <h1 class="title" id="t">Free Key - SpeedX Hub</h1>
      <div class="row">
        <button id="gen" class="btn">Generate Key</button>
      </div>
      <div class="key-box">
        <canvas id="keyCanvas" class="key-canvas" height="64" aria-label="Clave"></canvas>
        <button id="copyGo" class="btn copy copykey" disabled>COPY KEY</button>
      </div>
    </section>
  </main>

  <script>
    // RAIN
    (function makeRain(){
      const rain = document.getElementById('rain');
      const drops = Math.min(220, Math.floor(window.innerWidth/6));
      for(let i=0;i<drops;i++){
        const d=document.createElement('div');d.className='raindrop';
        d.style.left=(Math.random()*100)+'vw';
        d.style.animationDelay=(Math.random()*3)+'s';
        d.style.animationDuration=(1.6+Math.random()*1.8)+'s';
        d.style.setProperty('--drift', (Math.random()*24-12)+'px');
        rain.appendChild(d);
      }
    })();

    // LIGHTNING
    (function lightningLoop(){
      const layer=document.getElementById('lightning');
      const flash=()=>{layer.classList.add('flash');setTimeout(()=>layer.classList.remove('flash'),160)};
      const schedule=()=>setTimeout(()=>{flash();schedule()}, 2200+Math.random()*4200);
      schedule();
    })();

    // KEY RENDER
    const canvas=document.getElementById('keyCanvas');
    const ctx=canvas.getContext('2d');
    let currentKey='';

    function draw(text){
      const cssW=canvas.clientWidth, cssH=canvas.clientHeight; const dpr=Math.min(2, window.devicePixelRatio||1);
      canvas.width=cssW*dpr; canvas.height=cssH*dpr; ctx.setTransform(dpr,0,0,dpr,0,0);
      const grad=ctx.createLinearGradient(0,0,cssW,cssH); grad.addColorStop(0,'rgba(255,255,255,.08)'); grad.addColorStop(1,'rgba(255,255,255,.02)');
      ctx.fillStyle=grad; ctx.fillRect(0,0,cssW,cssH);
      ctx.font='800 26px ui-monospace,SFMono-Regular,Menlo,Consolas,monospace'; ctx.textAlign='center'; ctx.textBaseline='middle';
      ctx.shadowColor='rgba(255,106,0,.85)'; ctx.shadowBlur=14; ctx.fillStyle='#ffe9c0';
      ctx.fillText(text||'— — — —  Presiona "Generate Key"  — — — —', cssW/2, cssH/2);
    }
    draw('');

    function randomKey(){
      const A='ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; const b=n=>Array.from({length:n},()=>A[Math.floor(Math.random()*A.length)]).join('');
      return `${b(4)}-${b(4)}-${b(4)}-${b(4)}`;
    }

    const genBtn=document.getElementById('gen');
    const copyGoBtn=document.getElementById('copyGo');
    const ROBLOX_URL= 'https://www.roblox.com/share?code=5010f744d253f34c87f052d3c72f0ec9&type=Server';

    genBtn.addEventListener('click',()=>{
      currentKey=randomKey();
      draw(currentKey);
      copyGoBtn.disabled=false;
      genBtn.textContent='Generada ✓';
    });

    async function copyText(text){
      try{ await navigator.clipboard.writeText(text); return true; }
      catch(e){
        const ta=document.createElement('textarea'); ta.value=text; document.body.appendChild(ta); ta.select();
        try{document.execCommand('copy');}catch(e2){} finally{document.body.removeChild(ta)}
        return true;
      }
    }

    copyGoBtn.addEventListener('click', async ()=>{
      if(!currentKey) return;
      await copyText(currentKey);
      // Redirect (same tab) -> reduce 400 from blocked popups
      window.location.href = ROBLOX_URL;
    });

    // Keep crisp on resize
    window.addEventListener('resize',()=>draw(currentKey));

    // SIDEBAR TOGGLE
    const sidebar=document.getElementById('sidebar');
    const menuBtn=document.getElementById('menuBtn');
    menuBtn.addEventListener('click',()=>{
      const open = sidebar.classList.toggle('open');
      sidebar.setAttribute('aria-hidden', String(!open));
    });
  </script>
</body>
</html>
